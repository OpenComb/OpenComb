module.exports = {
	layout:"weblayout"
	, view:"ocPlatform/templates/usr/SignOut.html"
	, process:function (seed, nut, earth)
	{
		nut.model.usernames = earth.req.session.idmgr.usernames() ;
		return true ;
	}

	, actions: {

		"do": function(seed, nut, earth)
		{
			var idmgr = earth.req.session.idmgr ;

			if(!idmgr.id(seed.username))
			{
				nut.message("无效的用户",[],"error") ;
				return true ;
			}

			idmgr.signout(seed.username) ;

			if( idmgr.current() )
			{
				nut.message("用户已退出，切换到%s的身份",[idmgr.current().username],"success") ;
			}

			else
			{
				nut.message("用户已退出",null,"success") ;
			}

			return true ;
		}

	}
}

module.exports.__as_a_controller = true ;