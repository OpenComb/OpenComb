//
var util = require("ocTemplate/lib/shaderfuncs/util.js") ;

module.exports = {

	selector: ["link","script","resources"]

	, shader: function(uiobject,context,model){

		var tagName = uiobject.tagName.toLowerCase() ;

		if( tagName=="resources" )
		{
			context.buff.write( context.resourcepool ) ;
			context.stopShaderSeq() ;
		}

		var attrname = tagName=="script"? "src": "href" ;

		// 排除 无src属性的 script标签
		if( !uiobject.headTag.namedAttributes[attrname] )
		{
			return ;
		}

		else
		{
			var url = util.evalAttrExpEx(uiobject.headTag,attrname,"",context,model) ;
			context.resourcepool.putin(url,uiobject,context,model) ;
		}

		context.stopShaderSeq() ;
	}

}




module.exports.__SHIPPABLE = true ;