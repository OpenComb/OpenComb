var Template = require("ocTemplate/lib/Template.js") ;
var ViewTemplateCaches = require("ocPlatform/lib/mvc/view/ViewTemplateCaches.js") ;

var FrontendViewTemplate = module.exports = function(){
	Template.apply(this,arguments) ;
}
module.exports.prototype.__proto__ = Template.prototype ;

module.exports.prototype._readTemplateFile = function(callback)
{
	jQuery.ajax({
		url: "/shipdown:template/" + this.filePath
		, cache: true
		, dataType: "html"
		, success: function(data)
		{
			callback(null,data) ;
		}
		, error: function(req,txt)
		{
			callback(txt) ;
		}
	}) ;
}


// caches ---------------------------
module.exports.Caches = function(){
	ViewTemplateCaches.apply(this,arguments) ;
	this._tempateclass = FrontendViewTemplate ;
}
module.exports.Caches.prototype.__proto__ = ViewTemplateCaches.prototype ;

module.exports.Caches.prototype.resolve = function(filename)
{
	return filename ;
}

module.exports.Caches.singleton = new module.exports.Caches ;


module.exports.__SHIPPABLE = true ;
